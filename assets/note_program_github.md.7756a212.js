import{_ as s,o as n,c as a,d as l}from"./app.92214221.js";const A=JSON.parse('{"title":"githubAction","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. 什么是github-Action?","slug":"_1-什么是github-action","link":"#_1-什么是github-action","children":[]},{"level":2,"title":"2. 如何引用别人的action?","slug":"_2-如何引用别人的action","link":"#_2-如何引用别人的action","children":[]},{"level":2,"title":"总结：","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"本质：","slug":"本质","link":"#本质","children":[]},{"level":2,"title":"3. 例子:使用github-Action和giteePage自动部署","slug":"_3-例子-使用github-action和giteepage自动部署","link":"#_3-例子-使用github-action和giteepage自动部署","children":[]}],"relativePath":"note/program/github.md","lastUpdated":1682071845000}'),p={name:"note/program/github.md"},e=l(`<h1 id="githubaction" tabindex="-1">githubAction <a class="header-anchor" href="#githubaction" aria-hidden="true">#</a></h1><p>使用Action实现自动部署:</p><h2 id="_1-什么是github-action" tabindex="-1">1. 什么是github-Action? <a class="header-anchor" href="#_1-什么是github-action" aria-hidden="true">#</a></h2><p>Action可以在我们对代码仓库进行某些操作时，自动帮我们去执行某一些操作（push、pull），可以理解成在gitHub上面的监听器,其本质就是找到你项目中的<code>.github/workflows</code>目录下的<code>yml</code>文件，然后根据里面的脚本指令去执行.</p><h2 id="_2-如何引用别人的action" tabindex="-1">2. 如何引用别人的action? <a class="header-anchor" href="#_2-如何引用别人的action" aria-hidden="true">#</a></h2><p>github上有很多现成的action，也就是别人分享上去的，我们使用时只需要在yml中配置就好<br> 要使用别人的 Action，你需要在你的 YAML 文件中使用 <code>uses</code> 字段来指定该 Action 的名称和版本。例如，如果你要使用 <code>actions/setup-node</code> Action 来设置 Node.js 环境，你可以这样写：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/setup-node@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">14.x</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm install</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm test</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在这个例子中，我们在 <code>steps</code> 中添加了 <code>uses</code> 字段来使用 <code>actions/setup-node@v2</code> Action，这个 Action 会下载并配置 Node.js 环境。在 <code>with</code> 中，我们还指定了 Node.js 版本为 <code>14.x</code>。</p><p>如果你需要传递更多的参数给 Action，可以使用 <code>with</code> 字段。有些 Actions 还允许使用 <code>env</code> 字段来设置环境变量。你可以在 GitHub Marketplace 上查找和浏览可用的 Actions，以及了解如何在你的 YAML 文件中使用它们。</p><p>需要注意的是，如果你使用的是私有仓库中的 Action，你需要在 YAML 文件中指定该 Action 所在的仓库，例如：</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">private-owner/private-repo@v1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">some-input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">some-value</span></span>
<span class="line"><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">some-command</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在这个例子中，我们使用了私有仓库中的 <code>private-owner/private-repo</code> Action，并且使用了 <code>some-input</code> 参数来传递值。</p><h2 id="总结" tabindex="-1">总结： <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><p>使用 <code>uses </code>字段来引用别人的 Action，并在 <code>wit</code>h 和 <code>env</code> 字段中传递参数和设置环境变量。如果你使用的是私有仓库中的 Action，你需要在 <code>YAML</code> 文件中指定该 Action 所在的仓库。</p><h2 id="本质" tabindex="-1">本质： <a class="header-anchor" href="#本质" aria-hidden="true">#</a></h2><p>当你在你的 Action 配置文件中使用 <code>uses </code>字段引用其他人的 <code>Action</code> 时，GitHub 会自动从指定的仓库中下载相应的代码并执行它。因此，你不需要手动下载任何代码，也不需要将它们添加到你的项目中。 值得注意的是，GitHub Actions 的机制是使用 <code>Docker</code> 来构建和运行各个步骤的容器环境，因此当你引用其他人的 Action 时，GitHub 会自动下载 Action 的 <code>Docker</code> 镜像，并在容器环境中运行它。这种机制使得在不同项目之间共享和重用 Actions 变得更加容易和高效。</p><h2 id="_3-例子-使用github-action和giteepage自动部署" tabindex="-1">3. 例子:使用github-Action和giteePage自动部署 <a class="header-anchor" href="#_3-例子-使用github-action和giteepage自动部署" aria-hidden="true">#</a></h2><p>gitee没有自动部署功能，但是github有提供该功能。 实现目标:在push代码时，自动安装依赖打包并将代码更新到gitee，接着将打包后的项目部署到giteePage上面。 步骤：到项目仓库中点击<code>action</code>选项,新建一个<code>action</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> syncToGitee</span></span>
<span class="line"><span style="color:#FFCB6B;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">branches</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  repo</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">sync</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    runs</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> ubuntu</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Mirror the Github organization repos to Gitee</span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Yikun</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">hub</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">mirror</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">action@master</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">src</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">github/HYB945896023</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">dst</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">gitee/huang-yibin1999</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">dst_key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> $</span><span style="color:#89DDFF;">{{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secrets</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">GITEE_PRIVATE</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">dst_token</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  $</span><span style="color:#89DDFF;">{{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secrets</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">GITEE_TOKEN</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">static_list</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">blog</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">force_update</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">debug</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Build Gitee Pages</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> yanglbme</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gitee</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">pages</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">action@main</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          # 注意替换为你的 Gitee 用户名</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">username</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> huang</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">yibin1999</span></span>
<span class="line"><span style="color:#A6ACCD;">          # 注意在 Settings</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">Secrets 配置 GITEE_PASSWORD</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">password</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> $</span><span style="color:#89DDFF;">{{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secrets</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">GITEE_PASSWORD</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#A6ACCD;">          # 注意替换为你的 Gitee 仓库，仓库名严格区分大小写，请准确填写，否则会出错</span></span>
<span class="line"><span style="color:#A6ACCD;">          gitee</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">repo</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> huang</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">yibin1999</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">blog</span></span>
<span class="line"><span style="color:#A6ACCD;">          # 要部署的分支，默认是 master，若是其他分支，则需要指定（指定的分支必须存在）</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#FFCB6B;">branch</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> master</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>以上的配置中<code>ssh</code>,<code>password</code>等敏感信息存在项目 <strong>Settings=&gt;Security=&gt;Security and variables=&gt;Actions</strong>中，而<code>GITEE_TOKEN</code>则在<a href="https://gitee.com/profile/personal_access_tokens" target="_blank" rel="noreferrer">点击</a>,<code>GITEE_PRIVATE</code>就是我们去Gitee拉取代码使用的私钥，存在用户的电脑中<code>~/.ssh</code> 本博客就是基于以上自动部署</p>`,20),o=[e];function c(t,r,i,D,y,F){return n(),a("div",null,o)}const d=s(p,[["render",c]]);export{A as __pageData,d as default};
